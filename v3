#include <iostream>

#include <allegro5/allegro.h>
#include <allegro5/allegro_primitives.h>
#include <allegro5/allegro_image.h>
#include <allegro5/allegro_native_dialog.h>
#include <allegro5/allegro_font.h>
#include <allegro5/allegro_ttf.h>
#include <string>
#include <Windows.h>

using namespace std;

int jugar();

int ancho = 600;
int alto = 800;
int segundo = 0;

ALLEGRO_DISPLAY* ventana;
ALLEGRO_TIMER* segundoTimer;
ALLEGRO_EVENT_QUEUE* queue;
ALLEGRO_FONT* lazy;
ALLEGRO_BITMAP* menu_principal;
ALLEGRO_BITMAP* menu_opcion1;
ALLEGRO_BITMAP* menu_opcion2;
ALLEGRO_BITMAP* juego_fondo;
ALLEGRO_BITMAP* personaje_arriba;
ALLEGRO_BITMAP* personaje_abajo;
ALLEGRO_BITMAP* personaje_derecha;
ALLEGRO_BITMAP* personaje_izquierda;
ALLEGRO_BITMAP* bala;

int main()
{
    al_init();
    al_init_font_addon();
    al_init_ttf_addon();
    al_install_mouse();
    al_init_primitives_addon();
    al_init_image_addon();
    al_install_keyboard();

    int ancho_w = GetSystemMetrics(SM_CXSCREEN);
    int alto_w = GetSystemMetrics(SM_CYSCREEN);
    int segundo = 0;
    int x = -1, y = -1;
    int botones[] = { 0 };

    ventana = al_create_display(ancho, alto);
    segundoTimer = al_create_timer( 1.0 / 15.0 );
    queue = al_create_event_queue();
    lazy = al_load_font("fuentes/lazy.ttf", 20, NULL);

    ALLEGRO_EVENT evento_tiempo;

    //imagenes BMP
    menu_principal = al_load_bitmap("imagenes/pagina_uno.bmp");
    menu_opcion1 = al_load_bitmap("imagenes/pagina_dos.bmp");
    menu_opcion2 = al_load_bitmap("imagenes/pagina_tres.bmp");
    personaje_arriba = al_load_bitmap("imagenes/personaje_jugador_arriba.png");
    personaje_abajo = al_load_bitmap("imagenes/personaje_jugador_abajo.png");
    personaje_derecha = al_load_bitmap("imagenes/personaje_jugador_derecha.png");
    personaje_izquierda = al_load_bitmap("imagenes/personaje_jugador_izquierda.png");
    juego_fondo = al_load_bitmap("imagenes/juego_uno.bmp");
    bala = al_load_bitmap("imagenes/bala_de_dano.png");


    //eventos
    al_register_event_source(queue, al_get_timer_event_source(segundoTimer));
    al_register_event_source(queue, al_get_mouse_event_source());
    al_register_event_source(queue, al_get_keyboard_event_source());
    al_start_timer(segundoTimer);

    //Ventana del juego
    al_set_window_title(ventana, "MI juego");
    al_set_window_position(ventana, ancho_w / 2 - 600 / 2, alto_w / 2 - 800 / 2);


    while (true)
    {
        al_wait_for_event(queue, &evento_tiempo);
        if (evento_tiempo.type == ALLEGRO_EVENT_TIMER) {
            if (evento_tiempo.timer.source == segundoTimer) {
                segundo++;
            }
        }

        al_clear_to_color(al_map_rgb(0, 0, 0));

        if (botones[0] == 0) {
            al_draw_bitmap(menu_principal, 0, 0, 0);
        }
        else if (botones[0] == 1) {
            al_draw_bitmap(menu_opcion1, 0, 0, 0);
        }
        else {
            al_draw_bitmap(menu_opcion2, 0, 0, 0);
        }

        if (evento_tiempo.type == ALLEGRO_EVENT_MOUSE_AXES || evento_tiempo.type == ALLEGRO_EVENT_MOUSE_BUTTON_DOWN) {
            x = evento_tiempo.mouse.x;
            y = evento_tiempo.mouse.y;

            if (x >= 96 && x <= 322 && y >= 248 && y <= 287) {
                botones[0] = 1;
                if (evento_tiempo.mouse.button & 1) { //jugar
                    jugar();
                }
            }
            else {
                if (x >= 94 && x <= 354 && y >= 333 && y <= 375) { //salir
                    botones[0] = 2;
                    if (evento_tiempo.mouse.button & 1) {
                        return 1;
                    }
                }
                else {
                    botones[0] = 0;
                }
            }
        }

        al_draw_text(lazy, al_map_rgb(255, 255, 255), 0, 770, NULL, ("Segundos: " + to_string(segundo/15)).c_str());
        al_flip_display();
    }
    return 0;
}

ALLEGRO_EVENT evento_jugar;

//float posi_bala_x = 166, posi_bala_y = 375,

int jugar()
{
    float posi_x = 134, posi_y = 343, posi_bala_ORIx = 166, posi_bala_ORIy = 375, velocidad_movimiento = 32;
    int posicion_animacion = 0, puntero[4]{}, limite[5]{}, limite_total = 0, disparo_confirmado[4]{}, enemigo[4]{}, numero_inicio[4]{}, enemigo_vivo[4]{}, o = 0, buscador_de_movimiento = 0, posicion_animacion_enemigo[4]{}, puntero_enemigos[4][4]{}, disparo_enemigo[4][4]{};
    float posi_bala_x[4]{}, posi_bala_y[4]{}, posi_enemigo_x[4]{}, posi_enemigo_xDOS[4]{}, posi_enemigo_y[4]{}, posi_enemigo_yDOS[4]{}, enenmigo_interaccion[4][4]{}, bala_enemiga_x[4][4]{}, bala_enemiga_xORI[4]{}, bala_enemiga_y[4][4]{}, bala_enemiga_yORI[4]{};

    //Posicion inicial del enemigo
    posi_enemigo_x[0] = 38;
    posi_enemigo_xDOS[0] = 131;
    posi_enemigo_y[0] = 55;
    posi_enemigo_yDOS[0] = 147;

    posi_enemigo_x[1] = 262;
    posi_enemigo_xDOS[1] = 355;
    posi_enemigo_y[1] = 55;
    posi_enemigo_yDOS[1] = 147;

    posi_enemigo_x[2] = 38;
    posi_enemigo_xDOS[2] = 131;
    posi_enemigo_y[2] = 599;
    posi_enemigo_yDOS[2] = 693;

    posi_enemigo_x[3] = 262;
    posi_enemigo_xDOS[3] = 355;
    posi_enemigo_y[3] = 599;
    posi_enemigo_yDOS[3] = 639;

    //posicion inicial de la bala enemiga
    bala_enemiga_xORI[0] = 70;
    bala_enemiga_yORI[0] = 85;

    bala_enemiga_xORI[1] = 294;
    bala_enemiga_yORI[1] = 85;

    bala_enemiga_xORI[2] = 70;
    bala_enemiga_yORI[2] = 633;

    bala_enemiga_xORI[3] = 294;
    bala_enemiga_yORI[3] = 633;

    srand(time(NULL));

    while (ALLEGRO_EVENT_TIMER) {
        al_wait_for_event(queue, &evento_jugar);

        //Movimiento del jugador
        if (evento_jugar.type == ALLEGRO_EVENT_KEY_DOWN)
        {
            switch (evento_jugar.keyboard.keycode) {
            case ALLEGRO_KEY_DOWN:
                puntero[0]++;
                if (puntero[0] > 1) {
                    posi_y += velocidad_movimiento;
                    posi_bala_ORIy += velocidad_movimiento;
                }
                puntero[1] = 0;
                puntero[2] = 0;
                puntero[3] = 0;
                break;
            case ALLEGRO_KEY_UP:
                puntero[1]++;
                if (puntero[1] > 1) {
                    posi_y -= velocidad_movimiento;
                    posi_bala_ORIy -= velocidad_movimiento;
                }
                puntero[0] = 0;
                puntero[2] = 0;
                puntero[3] = 0;
                break;
            case ALLEGRO_KEY_RIGHT:
                puntero[2]++;
                if (puntero[2] > 1) {
                    posi_x += velocidad_movimiento;
                    posi_bala_ORIx += velocidad_movimiento;
                }
                puntero[0] = 0;
                puntero[1] = 0;
                puntero[3] = 0;
                break;
            case ALLEGRO_KEY_LEFT:
                puntero[3]++;
                if (puntero[3] > 1) {
                    posi_x -= velocidad_movimiento;
                    posi_bala_ORIx -= velocidad_movimiento;
                }
                puntero[0] = 0;
                puntero[1] = 0;
                puntero[2] = 0;
            default:
                break;
            }
        }
        //tiempo
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (evento_jugar.timer.source == segundoTimer) {
                segundo++;
            }
        }

        al_clear_to_color(al_map_rgb(0, 0, 0));
        al_draw_bitmap(juego_fondo, 0, 0, 0);

        //Limite de la bala, INTERNO

        if (posi_bala_ORIy < 50+32) {
            posi_bala_ORIy += velocidad_movimiento;
        }
        if (posi_bala_ORIy > 599+32) {
            posi_bala_ORIy -= velocidad_movimiento;
        }
        if (posi_bala_ORIx < 36+32) {
            posi_bala_ORIx += velocidad_movimiento;
        }
        if (posi_bala_ORIx > 262+32) {
            posi_bala_ORIx -= velocidad_movimiento;
        }

        //limite de la bala externo

        if (posi_bala_x[0] < 36) {
            limite[0] = 0;
        }
        else {
            limite[0] = 1;
        }
        if (posi_bala_x[0] > 262 + 32) {
            limite[1] = 0;
        }
        else {
            limite[1] = 1;
        }
        if (posi_bala_y[0] < 50) {
            limite[2] = 0;
        }
        else {
            limite[2] = 1;
        }
        if (posi_bala_y[0] > 599 + 32) {
            limite[3] = 0;
        }
        else {
            limite[3] = 1;
        }

        //Bala
        if (evento_jugar.type == ALLEGRO_EVENT_KEY_DOWN) {
            switch (evento_jugar.keyboard.keycode) {
            case ALLEGRO_KEY_Z:
                cout << "Presionaste z" << endl;
                limite[4] = 1;
            default:
                break;
            }
        }

        /* DISPARO CONFIRMADO TABLA DE POSICIONES
        P 0 = abajo
        P 1 = arriba
        p 2 = derecha
        p 3 = izquierda
        */

        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {

            for (int i = 0; i <= 4; i++) {
                limite_total = limite_total + limite[i];
            }
            if (limite_total == 5 && puntero[0] >= 1) {
                disparo_confirmado[0] = 1;
            }
            if (limite_total == 5 && puntero[1] >= 1) {
                disparo_confirmado[1] = 1;
            }
            if (limite_total == 5 && puntero[2] >= 1) {
                disparo_confirmado[2] = 1;
            }
            if (limite_total == 5 && puntero[3] >= 1) {
                disparo_confirmado[3] = 1;
            }



            if (disparo_confirmado[0] == 1) {
                posi_bala_y[0] += 32;
                al_draw_bitmap(bala, posi_bala_x[0], posi_bala_y[0], 0);
                cout << posi_bala_y[0] << endl;
                limite[4] = 0;
                if (posi_bala_y[0] > 599 + 32) {
                    disparo_confirmado[0] = 0;
                }
            }
            if (disparo_confirmado[1] == 1) {
                posi_bala_y[1] -= 32;
                al_draw_bitmap(bala, posi_bala_x[1], posi_bala_y[1], 0);
                cout << posi_bala_y[1] << endl;
                limite[4] = 0;
                if (posi_bala_y[1] < 50 + 32) {
                    disparo_confirmado[1] = 0;
                }
            }
            if (disparo_confirmado[2] == 1) {
                posi_bala_x[2] += 32;
                al_draw_bitmap(bala, posi_bala_x[2], posi_bala_y[2], 0);
                cout << posi_bala_x[2] << endl;
                limite[4] = 0;
                if (posi_bala_x[2] > 262 + 32) {
                    disparo_confirmado[2] = 0;
                }
            }
            if (disparo_confirmado[3] == 1) {
                posi_bala_x[3] -= 32;
                al_draw_bitmap(bala, posi_bala_x[3], posi_bala_y[3], 0);
                cout << posi_bala_x[3] << endl;
                limite[4] = 0;
                if (posi_bala_x[3] < 36 + 32) {
                    disparo_confirmado[3] = 0;
                }
            }
        }

        //terrible
        if (disparo_confirmado[0] == 0) {
            posi_bala_x[0] = posi_bala_ORIx;
            posi_bala_y[0] = posi_bala_ORIy;
        }
        if (disparo_confirmado[1] == 0) {
            posi_bala_x[1] = posi_bala_ORIx;
            posi_bala_y[1] = posi_bala_ORIy;
        }
        if (disparo_confirmado[2] == 0) {
            posi_bala_x[2] = posi_bala_ORIx;
            posi_bala_y[2] = posi_bala_ORIy;
        }
        if (disparo_confirmado[3] == 0) {
            posi_bala_x[3] = posi_bala_ORIx;
            posi_bala_y[3] = posi_bala_ORIy;
        }

        limite_total = 0;

        //animacion de andar por el mapa
        if (evento_jugar.type == ALLEGRO_EVENT_KEY_DOWN) {
            if (evento_jugar.keyboard.keycode == ALLEGRO_KEY_DOWN) {
                posicion_animacion = 0;
            }
            else if (evento_jugar.keyboard.keycode == ALLEGRO_KEY_UP) {
                posicion_animacion = 1;
            }
            else if (evento_jugar.keyboard.keycode == ALLEGRO_KEY_RIGHT) {
                posicion_animacion = 2;
            }
            else if (evento_jugar.keyboard.keycode == ALLEGRO_KEY_LEFT) {
                posicion_animacion = 3;
            }
        }

        //Enemigos
        if (enemigo[0] == 0) {
            for (int i = 0; i <= 3; i++) {
                if (enemigo[i] == 0) {
                    numero_inicio[i] = rand() % 100 + 1;
                    enemigo[i] = numero_inicio[i];
                }
                cout << "Numero aleatorio " << i << ": " << enemigo[i] << endl;
            }
            for (int i = 0; i <= 3; i++) {
                enemigo_vivo[i] = 1;
                cout << "Enemigo vivo " << i << ": " << enemigo_vivo[i] << endl;
            }
            for (o = 0; o <= 3; o++) {
                for (int i = 0; i <= 1; i++) {
                    enenmigo_interaccion[o][i] = rand() % 20 + 1;
                    cout << "Numero interaccion del enemigo {" << o << "} {" << i << "} " << enenmigo_interaccion[o][i] << endl;
                }
            }
        }

        /*if (enemigo_vivo[0] == 1) {
            al_draw_bitmap(personaje_abajo, posi_enemigo_x[0], posi_enemigo_y[0], 0);
        }
        if (enemigo_vivo[1] == 1) {
            al_draw_bitmap(personaje_abajo, posi_enemigo_x[1], posi_enemigo_y[1], 0);
        }
        if (enemigo_vivo[2] == 1) {
            al_draw_bitmap(personaje_arriba, posi_enemigo_x[2], posi_enemigo_y[2], 0);
        }
        if (enemigo_vivo[3] == 1) {
            al_draw_bitmap(personaje_arriba, posi_enemigo_x[3], posi_enemigo_y[3], 0);
        }*/

        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            for (int i = 0; i <= 3; i++) {
                if (enemigo_vivo[i] == 0) {
                    numero_inicio[i] = rand() % 100 + 1;
                    if (enemigo[i] == numero_inicio[0]) {
                        enemigo_vivo[i] = 1;
                        cout << "Lo encontro" << endl;
                    }
                }
            }
        }

        //Animacion del movimiento ENEMIGO

        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (enemigo_vivo[0] == 1) {
                buscador_de_movimiento = rand() % 20 + 1;
                if (buscador_de_movimiento == enenmigo_interaccion[0][0]) {
                    buscador_de_movimiento = rand() % 6 + 1;
                    cout << "itero" << endl;
                    switch (buscador_de_movimiento)
                    {
                    case 1:
                        puntero_enemigos[0][0]++;
                        posicion_animacion_enemigo[0] = 0;
                        if (puntero_enemigos[0][0] > 1) {
                            posi_enemigo_y[0] = posi_enemigo_y[0] - velocidad_movimiento;
                            posi_enemigo_yDOS[0] = posi_enemigo_yDOS[0] - velocidad_movimiento;
                            bala_enemiga_yORI[0] = bala_enemiga_yORI[0] - velocidad_movimiento;
                        }
                        puntero_enemigos[0][1] = 0;
                        puntero_enemigos[0][2] = 0;
                        puntero_enemigos[0][3] = 0;
                        break;
                    case 2:
                        puntero_enemigos[0][1]++;
                        posicion_animacion_enemigo[0] = 1;
                        if (puntero_enemigos[0][1] > 1) {
                            posi_enemigo_y[0] = posi_enemigo_y[0] + velocidad_movimiento;
                            posi_enemigo_yDOS[0] = posi_enemigo_yDOS[0] + velocidad_movimiento;
                            bala_enemiga_yORI[0] = bala_enemiga_yORI[0] + velocidad_movimiento;
                        }
                        puntero_enemigos[0][0] = 0;
                        puntero_enemigos[0][2] = 0;
                        puntero_enemigos[0][3] = 0;
                        break;
                    case 3:
                        puntero_enemigos[0][2]++;
                        posicion_animacion_enemigo[0] = 2;
                        if (puntero_enemigos[0][2] > 1) {
                            posi_enemigo_x[0] = posi_enemigo_x[0] + 32;
                            posi_enemigo_xDOS[0] = posi_enemigo_xDOS[0] + 32;
                            bala_enemiga_xORI[0] = bala_enemiga_xORI[0] + 32;
                        }
                        puntero_enemigos[0][0] = 0;
                        puntero_enemigos[0][1] = 0;
                        puntero_enemigos[0][3] = 0;
                        break;
                    case 4:
                        puntero_enemigos[0][3]++;
                        posicion_animacion_enemigo[0] = 3;
                        if (puntero_enemigos[0][3] > 1) {
                            posi_enemigo_x[0] = posi_enemigo_x[0] - 32;
                            posi_enemigo_xDOS[0] = posi_enemigo_xDOS[0] - 32;
                            bala_enemiga_xORI[0] = bala_enemiga_xORI[0] - 32;
                        }
                        puntero_enemigos[0][0] = 0;
                        puntero_enemigos[0][1] = 0;
                        puntero_enemigos[0][2] = 0;
                        break;
                    case 5:
                        if (puntero_enemigos[0][0] >= 1) {
                            disparo_enemigo[0][0] = 1;
                        }
                        else if (puntero_enemigos[0][1] >= 1) {
                            disparo_enemigo[0][1] = 1;
                        }
                        else if (puntero_enemigos[0][2] >= 1) {
                            disparo_enemigo[0][2] = 1;
                        }
                        else if (puntero_enemigos[0][3] >= 1) {
                            disparo_enemigo[0][3] = 1;
                        }
                        cout << "DISPARO A" << endl;
                        break;
                    case 6:
                        if (puntero_enemigos[0][0] >= 1) {
                            disparo_enemigo[0][0] = 1;
                        }
                        else if (puntero_enemigos[0][1] >= 1) {
                            disparo_enemigo[0][1] = 1;
                        }
                        else if (puntero_enemigos[0][2] >= 1) {
                            disparo_enemigo[0][2] = 1;
                        }
                        else if (puntero_enemigos[0][3] >= 1) {
                            disparo_enemigo[0][3] = 1;
                        }
                        cout << "DISPARO A" << endl;
                        break;
                    default:
                        break;
                    }
                }
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (enemigo_vivo[1] == 1) {
                buscador_de_movimiento = rand() % 20 + 1;
                if (buscador_de_movimiento == enenmigo_interaccion[1][0]) {
                    buscador_de_movimiento = rand() % 5 + 1;
                    cout << "itero 2" << endl;
                    switch (buscador_de_movimiento)
                    {
                    case 1:
                        puntero_enemigos[1][0]++;
                        posicion_animacion_enemigo[1] = 0;
                        if (puntero_enemigos[1][0] > 1) {
                            posi_enemigo_y[1] = posi_enemigo_y[1] - velocidad_movimiento;
                            posi_enemigo_yDOS[1] = posi_enemigo_yDOS[1] - velocidad_movimiento;
                            bala_enemiga_yORI[1] = bala_enemiga_yORI[1] - velocidad_movimiento;
                        }
                        puntero_enemigos[1][1] = 0;
                        puntero_enemigos[1][2] = 0;
                        puntero_enemigos[1][3] = 0;
                        break;
                    case 2:
                        puntero_enemigos[1][1]++;
                        posicion_animacion_enemigo[1] = 1;
                        if (puntero_enemigos[1][1] > 1) {
                            posi_enemigo_y[1] = posi_enemigo_y[1] + velocidad_movimiento;
                            posi_enemigo_yDOS[1] = posi_enemigo_yDOS[1] + velocidad_movimiento;
                            bala_enemiga_yORI[1] = bala_enemiga_yORI[1] + velocidad_movimiento;
                        }
                        puntero_enemigos[1][0] = 0;
                        puntero_enemigos[1][2] = 0;
                        puntero_enemigos[1][3] = 0;
                        break;
                    case 3:
                        puntero_enemigos[1][2]++;
                        posicion_animacion_enemigo[1] = 2;
                        if (puntero_enemigos[1][2] > 1) {
                            posi_enemigo_x[1] = posi_enemigo_x[1] + 32;
                            posi_enemigo_xDOS[1] = posi_enemigo_xDOS[1] + 32;
                            bala_enemiga_xORI[1] = bala_enemiga_xORI[1] + velocidad_movimiento;
                        }
                        puntero_enemigos[1][0] = 0;
                        puntero_enemigos[1][1] = 0;
                        puntero_enemigos[1][3] = 0;
                        break;
                    case 4:
                        puntero_enemigos[1][3]++;
                        posicion_animacion_enemigo[1] = 3;
                        if (puntero_enemigos[1][3] > 1) {
                            posi_enemigo_x[1] = posi_enemigo_x[1] - 32;
                            posi_enemigo_xDOS[1] = posi_enemigo_xDOS[1] - 32;
                            bala_enemiga_xORI[1] = bala_enemiga_xORI[1] - velocidad_movimiento;
                        }
                        puntero_enemigos[1][0] = 0;
                        puntero_enemigos[1][1] = 0;
                        puntero_enemigos[1][2] = 0;
                        break;
                    case 5:
                        if (puntero_enemigos[1][0] >= 1) {
                            disparo_enemigo[1][0] = 1;
                        }
                        else if (puntero_enemigos[1][1] >= 1) {
                            disparo_enemigo[1][1] = 1;
                        }
                        else if (puntero_enemigos[1][2] >= 1) {
                            disparo_enemigo[1][2] = 1;
                        }
                        else if (puntero_enemigos[1][3] >= 1) {
                            disparo_enemigo[1][3] = 1;
                        }
                        cout << "DISPARO B" << endl;
                        break;
                    case 6:
                        if (puntero_enemigos[1][0] >= 1) {
                            disparo_enemigo[1][0] = 1;
                        }
                        else if (puntero_enemigos[1][1] >= 1) {
                            disparo_enemigo[1][1] = 1;
                        }
                        else if (puntero_enemigos[1][2] >= 1) {
                            disparo_enemigo[1][2] = 1;
                        }
                        else if (puntero_enemigos[1][3] >= 1) {
                            disparo_enemigo[1][3] = 1;
                        }
                        cout << "DISPARO B" << endl;
                        break;
                    default:
                        break;
                    }
                }
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (enemigo_vivo[2] == 1) {
                buscador_de_movimiento = rand() % 20 + 1;
                if (buscador_de_movimiento == enenmigo_interaccion[2][0]) {
                    buscador_de_movimiento = rand() % 5 + 1;
                    cout << "itero 3" << endl;
                    switch (buscador_de_movimiento)
                    {
                    case 1:
                        puntero_enemigos[2][0]++;
                        posicion_animacion_enemigo[2] = 0;
                        if (puntero_enemigos[2][0] > 1) {
                            posi_enemigo_y[2] = posi_enemigo_y[2] - velocidad_movimiento;
                            posi_enemigo_yDOS[2] = posi_enemigo_yDOS[2] - velocidad_movimiento;
                            bala_enemiga_yORI[2] = bala_enemiga_yORI[2] - velocidad_movimiento;
                        }
                        puntero_enemigos[2][1] = 0;
                        puntero_enemigos[2][2] = 0;
                        puntero_enemigos[2][3] = 0;
                        break;
                    case 2:
                        puntero_enemigos[2][1]++;
                        posicion_animacion_enemigo[2] = 1;
                        if (puntero_enemigos[2][1] > 1) {
                            posi_enemigo_y[2] = posi_enemigo_y[2] + velocidad_movimiento;
                            posi_enemigo_yDOS[2] = posi_enemigo_yDOS[2] + velocidad_movimiento;
                            bala_enemiga_yORI[2] = bala_enemiga_yORI[2] + velocidad_movimiento;
                        }
                        puntero_enemigos[2][0] = 0;
                        puntero_enemigos[2][2] = 0;
                        puntero_enemigos[2][3] = 0;
                        break;
                    case 3:
                        puntero_enemigos[2][2]++;
                        posicion_animacion_enemigo[2] = 2;
                        if (puntero_enemigos[2][2] > 1) {
                            posi_enemigo_x[2] = posi_enemigo_x[2] + 32;
                            posi_enemigo_xDOS[2] = posi_enemigo_xDOS[2] + 32;
                            bala_enemiga_xORI[2] = bala_enemiga_xORI[2] + velocidad_movimiento;
                        }
                        puntero_enemigos[2][0] = 0;
                        puntero_enemigos[2][1] = 0;
                        puntero_enemigos[2][3] = 0;
                        break;
                    case 4:
                        puntero_enemigos[2][3]++;
                        posicion_animacion_enemigo[2] = 3;
                        if (puntero_enemigos[2][3] > 1) {
                            posi_enemigo_x[2] = posi_enemigo_x[2] - 32;
                            posi_enemigo_xDOS[2] = posi_enemigo_xDOS[2] - 32;
                            bala_enemiga_xORI[2] = bala_enemiga_xORI[2] - velocidad_movimiento;
                        }
                        puntero_enemigos[2][0] = 0;
                        puntero_enemigos[2][1] = 0;
                        puntero_enemigos[2][2] = 0;
                        break;
                    case 5:
                        if (puntero_enemigos[2][0] >= 1) {
                            disparo_enemigo[2][0] = 1;
                        }
                        else if (puntero_enemigos[2][1] >= 1) {
                            disparo_enemigo[2][1] = 1;
                        }
                        else if (puntero_enemigos[2][2] >= 1) {
                            disparo_enemigo[2][2] = 1;
                        }
                        else if (puntero_enemigos[2][3] >= 1) {
                            disparo_enemigo[2][3] = 1;
                        }
                        cout << "DISPARO C" << endl;
                        break;
                    case 6:
                        if (puntero_enemigos[2][0] >= 1) {
                            disparo_enemigo[2][0] = 1;
                        }
                        else if (puntero_enemigos[2][1] >= 1) {
                            disparo_enemigo[2][1] = 1;
                        }
                        else if (puntero_enemigos[2][2] >= 1) {
                            disparo_enemigo[2][2] = 1;
                        }
                        else if (puntero_enemigos[2][3] >= 1) {
                            disparo_enemigo[2][3] = 1;
                        }
                        cout << "DISPARO C" << endl;
                        break;
                    default:
                        break;
                    }
                }
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (enemigo_vivo[3] == 1) {
                buscador_de_movimiento = rand() % 20 + 1;
                if (buscador_de_movimiento == enenmigo_interaccion[3][0]) {
                    buscador_de_movimiento = rand() % 5 + 1;
                    cout << "itero 4" << endl;
                    switch (buscador_de_movimiento)
                    {
                    case 1:
                        puntero_enemigos[3][0]++;
                        posicion_animacion_enemigo[3] = 0;
                        if (puntero_enemigos[3][0] > 1) {
                            posi_enemigo_y[3] = posi_enemigo_y[3] - velocidad_movimiento;
                            posi_enemigo_yDOS[3] = posi_enemigo_yDOS[3] - velocidad_movimiento;
                            bala_enemiga_yORI[3] = bala_enemiga_yORI[3] - velocidad_movimiento;
                        }
                        puntero_enemigos[3][1] = 0;
                        puntero_enemigos[3][2] = 0;
                        puntero_enemigos[3][3] = 0;
                        break;
                    case 2:
                        puntero_enemigos[3][1]++;
                        posicion_animacion_enemigo[3] = 1;
                        if (puntero_enemigos[3][1] > 1) {
                            posi_enemigo_y[3] = posi_enemigo_y[3] + velocidad_movimiento;
                            posi_enemigo_yDOS[3] = posi_enemigo_yDOS[3] + velocidad_movimiento;
                            bala_enemiga_yORI[3] = bala_enemiga_yORI[3] + velocidad_movimiento;
                        }
                        puntero_enemigos[3][0] = 0;
                        puntero_enemigos[3][2] = 0;
                        puntero_enemigos[3][3] = 0;
                        break;
                    case 3:
                        puntero_enemigos[3][2]++;
                        posicion_animacion_enemigo[3] = 2;
                        if (puntero_enemigos[3][2] > 1) {
                            posi_enemigo_x[3] = posi_enemigo_x[3] + 32;
                            posi_enemigo_xDOS[3] = posi_enemigo_xDOS[3] + 32;
                            bala_enemiga_xORI[3] = bala_enemiga_xORI[3] + velocidad_movimiento;
                        }
                        puntero_enemigos[3][0] = 0;
                        puntero_enemigos[3][1] = 0;
                        puntero_enemigos[3][3] = 0;
                        break;
                    case 4:
                        puntero_enemigos[3][3]++;
                        posicion_animacion_enemigo[3] = 3;
                        if (puntero_enemigos[3][3] > 1) {
                            posi_enemigo_x[3] = posi_enemigo_x[3] - 32;
                            posi_enemigo_xDOS[3] = posi_enemigo_xDOS[3] - 32;
                            bala_enemiga_xORI[3] = bala_enemiga_xORI[3] - velocidad_movimiento;
                        }
                        puntero_enemigos[3][0] = 0;
                        puntero_enemigos[3][1] = 0;
                        puntero_enemigos[3][2] = 0;
                        break;
                    case 5:
                        if (puntero_enemigos[3][0] >= 1) {
                            disparo_enemigo[3][0] = 1;
                        }
                        else if (puntero_enemigos[3][1] >= 1) {
                            disparo_enemigo[3][1] = 1;
                        }
                        else if (puntero_enemigos[3][2] >= 1) {
                            disparo_enemigo[3][2] = 1;
                        }
                        else if (puntero_enemigos[3][3] >= 1) {
                            disparo_enemigo[3][3] = 1;
                        }
                        cout << "DISPARO D" << endl;
                        break;
                    case 6:
                        if (puntero_enemigos[3][0] >= 1) {
                            disparo_enemigo[3][0] = 1;
                        }
                        else if (puntero_enemigos[3][1] >= 1) {
                            disparo_enemigo[3][1] = 1;
                        }
                        else if (puntero_enemigos[3][2] >= 1) {
                            disparo_enemigo[3][2] = 1;
                        }
                        else if (puntero_enemigos[3][3] >= 1) {
                            disparo_enemigo[3][3] = 1;
                        }
                        cout << "DISPARO D" << endl;
                        break;
                    default:
                        break;
                    }
                }
            }
        }

        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (posicion_animacion_enemigo[0] == 0 && enemigo_vivo[0] == 1) {
                al_draw_bitmap(personaje_arriba, posi_enemigo_x[0], posi_enemigo_y[0], 0);
                /*cout << "el enemigo esta mirando arriba" << endl;*/
            }
            if (posicion_animacion_enemigo[0] == 1 && enemigo_vivo[0] == 1) {
                al_draw_bitmap(personaje_abajo, posi_enemigo_x[0], posi_enemigo_y[0], 0);
                /*cout << "el enemigo esta mirando abajo" << endl;*/
            }
            if (posicion_animacion_enemigo[0] == 2 && enemigo_vivo[0] == 1) {
                al_draw_bitmap(personaje_derecha, posi_enemigo_x[0], posi_enemigo_y[0], 0);
                /*cout << "el enemigo esta mirando derecha" << endl;*/
            }
            if (posicion_animacion_enemigo[0] == 3 && enemigo_vivo[0] == 1) {
                al_draw_bitmap(personaje_izquierda, posi_enemigo_x[0], posi_enemigo_y[0], 0);
                /*cout << "el enemigo esta mirando izquierda" << endl;*/
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (posicion_animacion_enemigo[1] == 0 && enemigo_vivo[1] == 1) {
                al_draw_bitmap(personaje_arriba, posi_enemigo_x[1], posi_enemigo_y[1], 0);
                /*cout << "el enemigo esta mirando arriba" << endl;*/
            }
            if (posicion_animacion_enemigo[1] == 1 && enemigo_vivo[1] == 1) {
                al_draw_bitmap(personaje_abajo, posi_enemigo_x[1], posi_enemigo_y[1], 0);
                /*cout << "el enemigo esta mirando abajo" << endl;*/
            }
            if (posicion_animacion_enemigo[1] == 2 && enemigo_vivo[1] == 1) {
                al_draw_bitmap(personaje_derecha, posi_enemigo_x[1], posi_enemigo_y[1], 0);
                /*cout << "el enemigo esta mirando derecha" << endl;*/
            }
            if (posicion_animacion_enemigo[1] == 3 && enemigo_vivo[1] == 1) {
                al_draw_bitmap(personaje_izquierda, posi_enemigo_x[1], posi_enemigo_y[1], 0);
                /*cout << "el enemigo esta mirando izquierda" << endl;*/
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (posicion_animacion_enemigo[2] == 0 && enemigo_vivo[2] == 1) {
                al_draw_bitmap(personaje_arriba, posi_enemigo_x[2], posi_enemigo_y[2], 0);
                /*cout << "el enemigo esta mirando arriba" << endl;*/
            }
            if (posicion_animacion_enemigo[2] == 1 && enemigo_vivo[2] == 1) {
                al_draw_bitmap(personaje_abajo, posi_enemigo_x[2], posi_enemigo_y[2], 0);
                /*cout << "el enemigo esta mirando abajo" << endl;*/
            }
            if (posicion_animacion_enemigo[2] == 2 && enemigo_vivo[2] == 1) {
                al_draw_bitmap(personaje_derecha, posi_enemigo_x[2], posi_enemigo_y[2], 0);
                /*cout << "el enemigo esta mirando derecha" << endl;*/
            }
            if (posicion_animacion_enemigo[2] == 3 && enemigo_vivo[2] == 1) {
                al_draw_bitmap(personaje_izquierda, posi_enemigo_x[2], posi_enemigo_y[2], 0);
                /*cout << "el enemigo esta mirando izquierda" << endl;*/
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (posicion_animacion_enemigo[3] == 0 && enemigo_vivo[3] == 1) {
                al_draw_bitmap(personaje_arriba, posi_enemigo_x[3], posi_enemigo_y[3], 0);
                /*cout << "el enemigo esta mirando arriba" << endl;*/
            }
            if (posicion_animacion_enemigo[3] == 1 && enemigo_vivo[3] == 1) {
                al_draw_bitmap(personaje_abajo, posi_enemigo_x[3], posi_enemigo_y[3], 0);
                /*cout << "el enemigo esta mirando abajo" << endl;*/
            }
            if (posicion_animacion_enemigo[3] == 2 && enemigo_vivo[3] == 1) {
                al_draw_bitmap(personaje_derecha, posi_enemigo_x[3], posi_enemigo_y[3], 0);
                /*cout << "el enemigo esta mirando derecha" << endl;*/
            }
            if (posicion_animacion_enemigo[3] == 3 && enemigo_vivo[3] == 1) {
                al_draw_bitmap(personaje_izquierda, posi_enemigo_x[3], posi_enemigo_y[3], 0);
                /*cout << "el enemigo esta mirando izquierda" << endl;*/
            }
        }

        //Bala de enemigos
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (disparo_enemigo[0][0] == 1) {
                bala_enemiga_y[0][0] -= 32;
                al_draw_bitmap(bala, bala_enemiga_x[0][0], bala_enemiga_y[0][0], 0);
                cout << bala_enemiga_y[0][0] << endl;
                if (bala_enemiga_y[0][0] < 50 + 32) {
                    disparo_enemigo[0][0] = 0;
                }
            }
            if (disparo_enemigo[0][1] == 1) {
                bala_enemiga_y[0][1] += 32;
                al_draw_bitmap(bala, bala_enemiga_x[0][1], bala_enemiga_y[0][1], 0);
                cout << bala_enemiga_y[0][1] << endl;
                if (bala_enemiga_y[0][1] > 599 + 32) {
                    disparo_enemigo[0][1] = 0;
                }
            }
            if (disparo_enemigo[0][2] == 1) {
                bala_enemiga_x[0][2] += 32;
                al_draw_bitmap(bala, bala_enemiga_x[0][2], bala_enemiga_y[0][2], 0);
                cout << bala_enemiga_x[0][2] << endl;
                if (bala_enemiga_x[0][2] > 262 + 32) {
                    disparo_enemigo[0][2] = 0;
                }
            }
            if (disparo_enemigo[0][3] == 1) {
                bala_enemiga_x[0][3] -= 32;
                al_draw_bitmap(bala, bala_enemiga_x[0][3], bala_enemiga_y[0][3], 0);
                cout << bala_enemiga_x[0][3] << endl;
                if (bala_enemiga_x[0][3] < 36 + 32) {
                    disparo_enemigo[0][3] = 0;
                }
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (disparo_enemigo[1][0] == 1) {
                bala_enemiga_y[1][0] -= 32;
                al_draw_bitmap(bala, bala_enemiga_x[1][0], bala_enemiga_y[1][0], 0);
                cout << bala_enemiga_y[1][0] << endl;
                if (bala_enemiga_y[1][0] < 50 + 32) {
                    disparo_enemigo[1][0] = 0;
                }
            }
            if (disparo_enemigo[1][1] == 1) {
                bala_enemiga_y[1][1] += 32;
                al_draw_bitmap(bala, bala_enemiga_x[1][1], bala_enemiga_y[1][1], 0);
                cout << bala_enemiga_y[1][1] << endl;
                if (bala_enemiga_y[1][1] > 599 + 32) {
                    disparo_enemigo[1][1] = 0;
                }
            }
            if (disparo_enemigo[1][2] == 1) {
                bala_enemiga_x[1][2] += 32;
                al_draw_bitmap(bala, bala_enemiga_x[1][2], bala_enemiga_y[1][2], 0);
                cout << bala_enemiga_x[1][2] << endl;
                if (bala_enemiga_x[1][2] > 262 + 32) {
                    disparo_enemigo[1][2] = 0;
                }
            }
            if (disparo_enemigo[1][3] == 1) {
                bala_enemiga_x[1][3] -= 32;
                al_draw_bitmap(bala, bala_enemiga_x[1][3], bala_enemiga_y[1][3], 0);
                cout << bala_enemiga_x[1][3] << endl;
                if (bala_enemiga_x[1][3] < 36 + 32) {
                    disparo_enemigo[1][3] = 0;
                }
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (disparo_enemigo[2][0] == 1) {
                bala_enemiga_y[2][0] -= 32;
                al_draw_bitmap(bala, bala_enemiga_x[2][0], bala_enemiga_y[2][0], 0);
                cout << bala_enemiga_y[2][0] << endl;
                if (bala_enemiga_y[2][0] < 50 + 32) {
                    disparo_enemigo[2][0] = 0;
                }
            }
            if (disparo_enemigo[2][1] == 1) {
                bala_enemiga_y[2][1] += 32;
                al_draw_bitmap(bala, bala_enemiga_x[2][1], bala_enemiga_y[2][1], 0);
                cout << bala_enemiga_y[2][1] << endl;
                if (bala_enemiga_y[2][1] > 599 + 64) {
                    disparo_enemigo[2][1] = 0;
                }
            }
            if (disparo_enemigo[2][2] == 1) {
                bala_enemiga_x[2][2] += 32;
                al_draw_bitmap(bala, bala_enemiga_x[2][2], bala_enemiga_y[2][2], 0);
                cout << bala_enemiga_x[2][2] << endl;
                if (bala_enemiga_x[2][2] > 262 + 32) {
                    disparo_enemigo[2][2] = 0;
                }
            }
            if (disparo_enemigo[2][3] == 1) {
                bala_enemiga_x[2][3] -= 32;
                al_draw_bitmap(bala, bala_enemiga_x[2][3], bala_enemiga_y[2][3], 0);
                cout << bala_enemiga_x[2][3] << endl;
                if (bala_enemiga_x[2][3] < 36 + 32) {
                    disparo_enemigo[2][3] = 0;
                }
            }
        }
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (disparo_enemigo[3][0] == 1) {
                bala_enemiga_y[3][0] -= 32;
                al_draw_bitmap(bala, bala_enemiga_x[3][0], bala_enemiga_y[3][0], 0);
                cout << bala_enemiga_y[3][0] << endl;
                if (bala_enemiga_y[3][0] < 50 + 32) {
                    disparo_enemigo[3][0] = 0;
                }
            }
            if (disparo_enemigo[3][1] == 1) {
                bala_enemiga_y[3][1] += 32;
                al_draw_bitmap(bala, bala_enemiga_x[3][1], bala_enemiga_y[3][1], 0);
                cout << bala_enemiga_y[3][1] << endl;
                if (bala_enemiga_y[3][1] > 599 + 64) {
                    disparo_enemigo[3][1] = 0;
                }
            }
            if (disparo_enemigo[3][2] == 1) {
                bala_enemiga_x[3][2] += 32;
                al_draw_bitmap(bala, bala_enemiga_x[3][2], bala_enemiga_y[3][2], 0);
                cout << bala_enemiga_x[3][2] << endl;
                if (bala_enemiga_x[3][2] > 262 + 32) {
                    disparo_enemigo[3][2] = 0;
                }
            }
            if (disparo_enemigo[3][3] == 1) {
                bala_enemiga_x[3][3] -= 32;
                al_draw_bitmap(bala, bala_enemiga_x[3][3], bala_enemiga_y[3][3], 0);
                cout << bala_enemiga_x[3][3] << endl;
                if (bala_enemiga_x[3][3] < 36 + 32) {
                    disparo_enemigo[3][3] = 0;
                }
            }
        }

        //Reaposisionamiento de la bala enemiga
        if (disparo_enemigo[0][0] == 0) {
            bala_enemiga_x[0][0] = bala_enemiga_xORI[0];
            bala_enemiga_y[0][0] = bala_enemiga_yORI[0];
        }
        if (disparo_enemigo[0][1] == 0) {
            bala_enemiga_x[0][1] = bala_enemiga_xORI[0];
            bala_enemiga_y[0][1] = bala_enemiga_yORI[0];
        }
        if (disparo_enemigo[0][2] == 0) {
            bala_enemiga_x[0][2] = bala_enemiga_xORI[0];
            bala_enemiga_y[0][2] = bala_enemiga_yORI[0];
        }
        if (disparo_enemigo[0][3] == 0) {
            bala_enemiga_x[0][3] = bala_enemiga_xORI[0];
            bala_enemiga_y[0][3] = bala_enemiga_yORI[0];
        }
        //
        if (disparo_enemigo[1][0] == 0) {
            bala_enemiga_x[1][0] = bala_enemiga_xORI[1];
            bala_enemiga_y[1][0] = bala_enemiga_yORI[1];
        }
        if (disparo_enemigo[1][1] == 0) {
            bala_enemiga_x[1][1] = bala_enemiga_xORI[1];
            bala_enemiga_y[1][1] = bala_enemiga_yORI[1];
        }
        if (disparo_enemigo[1][2] == 0) {
            bala_enemiga_x[1][2] = bala_enemiga_xORI[1];
            bala_enemiga_y[1][2] = bala_enemiga_yORI[1];
        }
        if (disparo_enemigo[1][3] == 0) {
            bala_enemiga_x[1][3] = bala_enemiga_xORI[1];
            bala_enemiga_y[1][3] = bala_enemiga_yORI[1];
        }
        //
        if (disparo_enemigo[2][0] == 0) {
            bala_enemiga_x[2][0] = bala_enemiga_xORI[2];
            bala_enemiga_y[2][0] = bala_enemiga_yORI[2];
        }
        if (disparo_enemigo[2][1] == 0) {
            bala_enemiga_x[2][1] = bala_enemiga_xORI[2];
            bala_enemiga_y[2][1] = bala_enemiga_yORI[2];
        }
        if (disparo_enemigo[2][2] == 0) {
            bala_enemiga_x[2][2] = bala_enemiga_xORI[2];
            bala_enemiga_y[2][2] = bala_enemiga_yORI[2];
        }
        if (disparo_enemigo[2][3] == 0) {
            bala_enemiga_x[2][3] = bala_enemiga_xORI[2];
            bala_enemiga_y[2][3] = bala_enemiga_yORI[2];
        }
        //
        if (disparo_enemigo[3][0] == 0) {
            bala_enemiga_x[3][0] = bala_enemiga_xORI[3];
            bala_enemiga_y[3][0] = bala_enemiga_yORI[3];
        }
        if (disparo_enemigo[3][1] == 0) {
            bala_enemiga_x[3][1] = bala_enemiga_xORI[3];
            bala_enemiga_y[3][1] = bala_enemiga_yORI[3];
        }
        if (disparo_enemigo[3][2] == 0) {
            bala_enemiga_x[3][2] = bala_enemiga_xORI[3];
            bala_enemiga_y[3][2] = bala_enemiga_yORI[3];
        }
        if (disparo_enemigo[3][3] == 0) {
            bala_enemiga_x[3][3] = bala_enemiga_xORI[3];
            bala_enemiga_y[3][3] = bala_enemiga_yORI[3];
        }

        //Prueba
        if (evento_jugar.type == ALLEGRO_EVENT_KEY_DOWN) {
            if (evento_jugar.keyboard.keycode == ALLEGRO_KEY_Q) {
                enemigo_vivo[0] = 0;
            }
            if (evento_jugar.keyboard.keycode == ALLEGRO_KEY_W) {
                enemigo_vivo[1] = 0;
            }
        }

        //Limite de la bala enemiga
        for (int i = 0; i <= 3; i++) {
            if (bala_enemiga_yORI[i] < 50 + 32) {
                bala_enemiga_yORI[i] += velocidad_movimiento;
            }
            if (bala_enemiga_yORI[i] > 599 + 64) {
                bala_enemiga_yORI[i] -= velocidad_movimiento;
            }
            if (bala_enemiga_xORI[i] < 36 + 32) {
                bala_enemiga_xORI[i] += velocidad_movimiento;
            }
            if (bala_enemiga_xORI[i] > 262 + 32) {
                bala_enemiga_xORI[i] -= velocidad_movimiento;
            }
        }

        //Muerte de enemigos
        if (evento_jugar.type == ALLEGRO_EVENT_TIMER) {
            if (enemigo_vivo[0] == 1) {
                if (posi_bala_x[0] >= posi_enemigo_x[0] && posi_bala_x[0] <= posi_enemigo_xDOS[0] && posi_bala_y[0] >= posi_enemigo_y[0] && posi_bala_y[0] <= posi_enemigo_yDOS[0]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[0] = 0;
                }
                if (posi_bala_x[1] >= posi_enemigo_x[0] && posi_bala_x[1] <= posi_enemigo_xDOS[0] && posi_bala_y[1] >= posi_enemigo_y[0] && posi_bala_y[1] <= posi_enemigo_yDOS[0]) {
                    cout << "Le dio 2" << endl;
                    enemigo_vivo[0] = 0;
                }
                if (posi_bala_x[2] >= posi_enemigo_x[0] && posi_bala_x[2] <= posi_enemigo_xDOS[0] && posi_bala_y[2] >= posi_enemigo_y[0] && posi_bala_y[2] <= posi_enemigo_yDOS[0]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[0] = 0;
                }
                if (posi_bala_x[3] >= posi_enemigo_x[0] && posi_bala_x[3] <= posi_enemigo_xDOS[0] && posi_bala_y[3] >= posi_enemigo_y[0] && posi_bala_y[3] <= posi_enemigo_yDOS[0]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[0] = 0;
                }
            }
            if (enemigo_vivo[1] == 1) {
                if (posi_bala_x[0] >= posi_enemigo_x[1] && posi_bala_x[0] <= posi_enemigo_xDOS[1] && posi_bala_y[0] >= posi_enemigo_y[1] && posi_bala_y[0] <= posi_enemigo_yDOS[1]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[1] = 0;
                }
                if (posi_bala_x[1] >= posi_enemigo_x[1] && posi_bala_x[1] <= posi_enemigo_xDOS[1] && posi_bala_y[1] >= posi_enemigo_y[1] && posi_bala_y[1] <= posi_enemigo_yDOS[1]) {
                    cout << "Le dio 2" << endl;
                    enemigo_vivo[1] = 0;
                }
                if (posi_bala_x[2] >= posi_enemigo_x[1] && posi_bala_x[2] <= posi_enemigo_xDOS[1] && posi_bala_y[2] >= posi_enemigo_y[1] && posi_bala_y[2] <= posi_enemigo_yDOS[1]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[1] = 0;
                }
                if (posi_bala_x[3] >= posi_enemigo_x[1] && posi_bala_x[3] <= posi_enemigo_xDOS[1] && posi_bala_y[3] >= posi_enemigo_y[1] && posi_bala_y[3] <= posi_enemigo_yDOS[1]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[1] = 0;
                }
            }
            if (enemigo_vivo[2] == 1) {
                if (posi_bala_x[0] >= posi_enemigo_x[2] && posi_bala_x[0] <= posi_enemigo_xDOS[2] && posi_bala_y[0] >= posi_enemigo_y[2] && posi_bala_y[0] <= posi_enemigo_yDOS[2]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[2] = 0;
                }
                if (posi_bala_x[1] >= posi_enemigo_x[2] && posi_bala_x[1] <= posi_enemigo_xDOS[2] && posi_bala_y[1] >= posi_enemigo_y[2] && posi_bala_y[1] <= posi_enemigo_yDOS[2]) {
                    cout << "Le dio 2" << endl;
                    enemigo_vivo[2] = 0;
                }
                if (posi_bala_x[2] >= posi_enemigo_x[2] && posi_bala_x[2] <= posi_enemigo_xDOS[2] && posi_bala_y[2] >= posi_enemigo_y[2] && posi_bala_y[2] <= posi_enemigo_yDOS[2]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[2] = 0;
                }
                if (posi_bala_x[3] >= posi_enemigo_x[2] && posi_bala_x[3] <= posi_enemigo_xDOS[2] && posi_bala_y[3] >= posi_enemigo_y[2] && posi_bala_y[3] <= posi_enemigo_yDOS[2]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[2] = 0;
                }
            }
            if (enemigo_vivo[3] == 1) {
                if (posi_bala_x[0] >= posi_enemigo_x[3] && posi_bala_x[0] <= posi_enemigo_xDOS[3] && posi_bala_y[0] >= posi_enemigo_y[3] && posi_bala_y[0] <= posi_enemigo_yDOS[3]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[3] = 0;
                }
                if (posi_bala_x[1] >= posi_enemigo_x[3] && posi_bala_x[1] <= posi_enemigo_xDOS[3] && posi_bala_y[1] >= posi_enemigo_y[3] && posi_bala_y[1] <= posi_enemigo_yDOS[3]) {
                    cout << "Le dio 2" << endl;
                    enemigo_vivo[3] = 0;
                }
                if (posi_bala_x[2] >= posi_enemigo_x[3] && posi_bala_x[2] <= posi_enemigo_xDOS[3] && posi_bala_y[2] >= posi_enemigo_y[3] && posi_bala_y[2] <= posi_enemigo_yDOS[3]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[3] = 0;
                }
                if (posi_bala_x[3] >= posi_enemigo_x[3] && posi_bala_x[3] <= posi_enemigo_xDOS[3] && posi_bala_y[3] >= posi_enemigo_y[3] && posi_bala_y[3] <= posi_enemigo_yDOS[3]) {
                    cout << "Le dio" << endl;
                    enemigo_vivo[3] = 0;
                }
            }
        }

        //Limitante del mapa ENEMIGOS
        for (int i = 0; i <= 3; i++) {
            if (posi_enemigo_y[i] < 50) {
                posi_enemigo_y[i] += velocidad_movimiento;
                posi_enemigo_yDOS[i] += velocidad_movimiento;
                cout << "a" << endl;
            }
            if (posi_enemigo_y[i] > 599) {
                posi_enemigo_y[i] -= velocidad_movimiento;
                posi_enemigo_yDOS[i] -= velocidad_movimiento;
                cout << "b" << endl;
            }
            if (posi_enemigo_x[i] < 36) {
                posi_enemigo_x[i] += velocidad_movimiento;
                posi_enemigo_xDOS[i] += velocidad_movimiento;
                cout << "c" << endl;
            }
            if (posi_enemigo_x[i] > 262) {
                posi_enemigo_x[i] -= velocidad_movimiento;
                posi_enemigo_xDOS[i] -= velocidad_movimiento;
                cout << "d" << endl;
            }
        }

        //Limitante del mapa
        if (posi_y < 50) {
            posi_y += velocidad_movimiento;
        }
        if (posi_y > 599) {
            posi_y -= velocidad_movimiento;
        }
        if (posi_x < 36) {
            posi_x += velocidad_movimiento;
        }
        if (posi_x > 262) {
            posi_x -= velocidad_movimiento;
        }

        //Posicion del personaje
        if (posicion_animacion == 0) {
            al_draw_bitmap(personaje_abajo, posi_x, posi_y, 0);
            /*al_draw_bitmap(bala, posi_x, posi_y, 0);*/
        }
        else if (posicion_animacion == 1) {
            al_draw_bitmap(personaje_arriba, posi_x, posi_y, 0);
            /*al_draw_bitmap(bala, posi_x, posi_y, 0);*/
        }
        else if (posicion_animacion == 2) {
            al_draw_bitmap(personaje_derecha, posi_x, posi_y, 0);
            /*al_draw_bitmap(bala, posi_x, posi_y, 0);*/
        }
        else {
            al_draw_bitmap(personaje_izquierda, posi_x, posi_y, 0);
            /*al_draw_bitmap(bala, posi_x, posi_y, 0);*/
        }

        // sprite de la bala: al_draw_bitmap(bala, posi_bala_x, posi_bala_y, 0);
        al_draw_text(lazy, al_map_rgb(255, 255, 255), 0, 770, NULL, ("Segundos: " + to_string(segundo/15)).c_str());
        al_flip_display();
    }

    return 1;
}

